(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-04014a82"],{1575:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"relative",attrs:{id:"system-backup"}},[a("page-loading"),a("div",{staticClass:"form-wrap mb20"},[t._l(t.data.fields,(function(e,i){return a("div",{key:i},["entry"==e.type?a("os-entry",{attrs:{item:e}},[a("div",{staticClass:"btn btn-blue",attrs:{title:0==i?t.$t("hoverTitle.downloadFile"):""},on:{click:function(e){return t.handleClick(i)}}},[t._v(t._s(e.btn))])]):t._e(),"input"==e.type?a("os-input",{attrs:{item:e},on:{operate:function(e){return t.$refs.upload.click()}},scopedSlots:t._u([{key:"tail",fn:function(){return[a("div",{staticClass:"btn btn-blue",staticStyle:{"margin-left":"20px"},on:{click:t.handle_update}},[t._v(t._s(t.$t("btn.save")))])]},proxy:!0}],null,!0),model:{value:t.fileName,callback:function(e){t.fileName=e},expression:"fileName"}}):t._e()],1)})),a("input",{ref:"upload",staticStyle:{width:"0",height:"0"},attrs:{type:"file"},on:{change:t.handleChange}})],2),a("div",{staticClass:"toolbar"},[t._v(t._s(t.data.toolbar))]),a("a",{ref:"downloadApi",staticStyle:{display:"none"},attrs:{name:"file",href:t.assetsUrl,mce_href:"#",download:"backup.tar.gz"}}),a("os-modal",{attrs:{loading:t.showModal,notification:t.notification}})],1)},o=[],n=(a("b0c0"),a("d3b7"),a("5530")),s=a("2f62"),c={data:function(){return{assetsUrl:"/backup.tar.gz",fileName:"",file:null,save_upgrade:"0",options:this.$t("system.update.save_select"),showModal:!1,notification:""}},computed:Object(n["a"])({data:function(){return this.$t("system.backup")}},Object(s["c"])({durationLong:function(t){return t.info.durationLong},durationReset:function(t){return t.info.durationReset}})),methods:{handleClick:function(t){var e=this;0==t?this.proxy_req("get","/webapi?op=sysupgrade_backup",!1,(function(t){e.assetsUrl=t.backup_path,console.log(e.assetsUrl,t.backup_path),e.$refs.downloadApi.click()}),!0):this.$confirm(this.$t("notification.confirmReset"),{type:"warning",title:this.$t("messageBox.title.info")}).then((function(t){e.longLoading("get","/webapi?op=reset",null,(function(){}),"showModal","notification",e.$t("notification.resetLoading"),e.$t("notification.resetSuccess"),e.durationReset)})).catch((function(t){}))},handleChange:function(t){console.log(t.target.files);var e=t.target.files[0];this.fileName=e.name;var a=new FormData;a.append("firmware",e),this.file=a;var i=new FileReader;i.onload=function(t){console.log(t.target.result)},i.readAsDataURL(e)},handle_update:function(){var t=this;if(null!=this.file){var e=this.createLoading();this.$req.post("/webapi?op=sysupgrade_backup_upload",this.file).then((function(a){a.code&&"1"==a.code?(console.log("ok"),t.longLoading("post","/webapi?op=sysupgrade_backup_execute",{save_upgrade:t.save_upgrade},(function(t){}),"showModal","notification",t.$t("notification.sysbackupLoading"),t.$t("notification.operateSuccess"),t.durationLong,e)):"-4"==a.code?(e.close(),t.$message({type:"error",message:t.$t("notification.invilidFileType"),showClose:!0})):"-6"==a.code&&(e.close(),t.$message({type:"error",message:t.$t("notification.uploadFileFailed"),showClose:!0}))})).catch((function(a){"-4"==a.code?(e.close(),t.$message({type:"error",message:t.$t("notification.invalidFileType"),showClose:!0})):"-6"==a.code&&(e.close(),t.$message({type:"error",message:t.$t("notification.uploadFileFailed"),showClose:!0}))})).finally((function(){e&&e.close()}))}else this.$message({type:"warning",message:this.$t("notification.lackBackupFile"),showClose:!0})}},created:function(){this.$bus.emit("changeTab",1)}},l=c,r=(a("c8bd"),a("2877")),d=Object(r["a"])(l,i,o,!1,null,"72016ffd",null);e["default"]=d.exports},"33cc":function(t,e,a){var i=a("47d0");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("499e").default;o("1c9815cc",i,!0,{sourceMap:!1,shadowMode:!1})},"47d0":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".divide-line[data-v-72016ffd]{height:2px;background-color:#ccc}",""]),t.exports=e},c8bd:function(t,e,a){"use strict";var i=a("33cc"),o=a.n(i);o.a}}]);