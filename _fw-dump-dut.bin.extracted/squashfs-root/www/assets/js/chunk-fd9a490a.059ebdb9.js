(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fd9a490a"],{2231:function(e,t,i){"use strict";var a=i("5562"),n=i.n(a);n.a},"51b0":function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,".select-mini[data-v-28992e96] .el-input .el-input__inner{width:90px;padding-left:10px;padding-right:10px;height:25px}.select-mini[data-v-28992e96] .el-input .el-input__icon{line-height:25px}",""]),e.exports=t},5562:function(e,t,i){var a=i("51b0");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("499e").default;n("50b97b3c",a,!0,{sourceMap:!1,shadowMode:!1})},c669:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"system-update"}},[i("div",{staticClass:"form-wrap mb20"},[i("div",{staticClass:"form-title"},[e._v(e._s(e.data.title)+":")]),e._l(e.data.fields,(function(t,a){return i("div",{key:a},["entry"==t.type?i("os-entry",{attrs:{item:t}},[e._v(" "+e._s(e.upgrade_value[a])+" ")]):e._e(),"input"==t.type&&2!=a?i("os-input",{attrs:{item:t},on:{operate:e.selectFile},model:{value:e.upgrade_value[a],callback:function(t){e.$set(e.upgrade_value,a,t)},expression:"upgrade_value[idx]"}}):e._e(),3==a?i("os-select",{attrs:{item:t,wholeField:!0,options:e.data.save_select},model:{value:e.upgrade_value[3],callback:function(t){e.$set(e.upgrade_value,3,t)},expression:"upgrade_value[3]"}}):e._e()],1)})),i("div",{staticClass:"value alone-right"},[i("div",{staticClass:"btn btn-blue",on:{click:function(t){return e.handle_update(0)}}},[e._v(e._s(e.$t("btn.update")))])])],2),"ZBT"===e.corporation?[e.$config.firmware_upgrade?[i("div",{staticClass:"divide-line"}),i("div",{staticClass:"form-wrap mb20"},[i("div",{staticClass:"form-title"},[e._v(e._s(e.data.title1)+":")]),e._l(e.data.fields1,(function(t,a){return i("div",{key:a},["entry"==t.type?i("os-entry",{attrs:{item:t}},[e._v(" "+e._s(e.upgrade_value1[a])+" ")]):e._e(),"input"==t.type&&2!=a?i("os-input",{attrs:{item:t},on:{operate:e.selectFile},model:{value:e.upgrade_value1[a],callback:function(t){e.$set(e.upgrade_value1,a,t)},expression:"upgrade_value1[idx]"}}):e._e(),3==a?i("os-select",{attrs:{item:t,wholeField:!0,options:e.data.save_select},model:{value:e.upgrade_value1[3],callback:function(t){e.$set(e.upgrade_value1,3,t)},expression:"upgrade_value1[3]"}}):e._e()],1)})),i("div",{staticClass:"value alone-right"},[i("div",{staticClass:"btn btn-blue",on:{click:function(t){return e.handle_update(1)}}},[e._v(e._s(e.$t("btn.update")))])])],2)]:e._e(),e.$config.online_upgrade?[i("div",{staticClass:"divide-line"}),i("div",{staticClass:"form-wrap mb20"},[i("div",{staticClass:"form-title"},[e._v(e._s(e.data.title2)+":")]),i("os-entry",{attrs:{item:e.data.fields2[0].label}},[e._v(e._s(e.upgrade_value[0]))]),i("os-entry",{attrs:{item:e.data.fields2[1].label}},[e._v(e._s(e.onlineStatus))]),i("os-select",{attrs:{item:e.data.fields2[2].label,wholeField:!0,options:e.data.save_select},model:{value:e.online_save,callback:function(t){e.online_save=t},expression:"online_save"}}),e.onlineAvailable?i("div",{staticClass:"value alone-right"},[i("div",{staticClass:"btn btn-blue",on:{click:e.onlineUpgrade}},[e._v(e._s(e.$t("btn.update")))])]):e._e()],1)]:e._e()]:e._e(),i("div",{staticClass:"toolbar"},[e._v(e._s(e.data.toolbar))]),i("input",{ref:"upload",staticStyle:{width:"0",height:"0","margin-left":"-9999px",opacity:"0"},attrs:{type:"file"},on:{change:e.handleChange}}),i("os-modal",{attrs:{notification:e.notification,loading:e.showModal}})],2)},n=[],s=(i("a434"),i("b0c0"),i("d3b7"),i("5530")),o=i("4360"),l=i("2f62"),u={data:function(){return{upgrade_value:["--","","",this.get_save_velue()],upgrade_value1:["--","","",this.get_save_velue()],select_timer:null,file:null,install:!1,showModal:!1,notification:"",onlineAvailable:!1,onlineStatus:"--",online_save:"0",showValue:o["a"].state.info.perm.config.showValue}},computed:Object(s["a"])({data:function(){return this.$t("system.update")}},Object(l["c"])({durationLong:function(e){return e.info.durationLong},durationMedium:function(e){return e.info.durationMedium}})),methods:{get_save_velue:function(){return"SL"===this.corporation?"1":"0"},get_sysupgrade:function(){var e=this;this.$req.get("/webapi?op=get_sys_version").then((function(t){console.log(t),e.$set(e.upgrade_value,0,t.sysversion),e.$set(e.upgrade_value1,0,t.sysversion)}))},selectFile:function(){var e=this;if(this.select_timer)return!1;this.$refs.upload.click(),this.select_timer=setTimeout((function(){e.select_timer=null}),3e3)},handleChange:function(e){console.log(e.target.files);var t=e.target.files[0];this.upgrade_value.splice(1,1,e.target.files[0].name);var i=new FormData;i.append("firmware",t),this.file=i;var a=new FileReader;a.onload=function(e){},a.readAsDataURL(t)},handle_update:function(e){var t=this;if(1===e)return""==this.upgrade_value1[1]?void this.$message({type:"warning",message:this.$t("notification.lackUpdateUrl"),showClose:!0}):(console.log(this.upgrade_value1[1]),void this.longLoading("post","/webapi?op=url_upgrade",{os_url:this.upgrade_value1[1],save_upgrade:this.upgrade_value1[3]},(function(){}),"showModal","notification",this.$t("notification.sysupgradeLoading"),this.$t("notification.updateSuccess"),this.durationLong,!1,{1:this.$t("notification.updateSuccess"),"-4":this.$t("nitification.updateFailed"),"-6":this.$t("notification.downloadFileFailed")}));if(null!=this.file){var i=this.createLoading();console.log("loading"),this.$req.post("/webapi?op=sysupgrade_upload_file",this.file).then((function(e){console.log(e),t.longLoading("post","/webapi?op=sysupgrade_execute",{save_upgrade:t.upgrade_value[3]},(function(){t.file=null,t.upgrade_value.splice(1,1,"")}),"showModal","notification",t.$t("notification.sysupgradeLoading"),t.$t("notification.updateSuccess"),t.durationLong,i)})).catch((function(e){"-4"==e.code?(i.close(),t.$message({type:"error",message:t.$t("notification.invalidFileType"),showClose:!0})):"-6"==e.code&&(i.close(),t.$message({type:"error",message:t.$t("notification.uploadFileFailed"),showClose:!0}))})).finally((function(){i&&i.close()}))}else this.$message({type:"warning",message:this.$t("notification.lackFile"),showClose:!0})},onlineCheck:function(){var e=this;this.$req.get("/webapi?op=online_upgrade_check").then((function(t){e.onlineAvailable=!0,e.onlineStatus=t.online_version})).catch((function(t){console.log(e.data),e.onlineAvailable=!1,e.onlineStatus=e.data.latest})).finally((function(){}))},onlineUpgrade:function(){this.longLoading("post","/webapi?op=online_upgrade_apply",{save_upgrade:this.online_save},null,"showModal","notification",this.$t("notification.onlineUpgradeLoading"),this.$t("notification.updateSuccess"),this.durationLong,!1,{1:this.$t("notification.updateSuccess"),"-4":this.$t("nitification.updateFailed"),"-6":this.$t("notification.downloadFileFailed")})}},created:function(){console.log(this.online_upgrade),this.$bus.emit("changeTab",0),this.get_sysupgrade(),this.onlineCheck()},mounted:function(){1==this.showValue&&this.$set(this.upgrade_value1,1,"https://www.megasat.tv/CamperConnected/MEG-R101-01_Firmware.bin")}},d=u,r=(i("2231"),i("2877")),c=Object(r["a"])(d,a,n,!1,null,"28992e96",null);t["default"]=c.exports}}]);