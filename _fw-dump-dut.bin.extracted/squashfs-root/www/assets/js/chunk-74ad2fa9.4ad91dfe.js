(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74ad2fa9"],{"825ae":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._l(t.origin.fields,(function(e,n){return[e.type?t._e():[i("os-input",3==n?{key:n,attrs:{item:e},on:{input:t.inputValue},model:{value:t.form_info[t.map[n]],callback:function(e){t.$set(t.form_info,t.map[n],e)},expression:"form_info[map[idx]]"}}:4==n?{key:n,attrs:{item:e,readonly:t.pdType},model:{value:t.form_info[t.map[n]],callback:function(e){t.$set(t.form_info,t.map[n],e)},expression:"form_info[map[idx]]"}}:{key:n,attrs:{item:e},model:{value:t.form_info[t.map[n]],callback:function(e){t.$set(t.form_info,t.map[n],e)},expression:"form_info[map[idx]]"}})],"switch"==e.type?i("os-switch",{key:n,attrs:{item:e},model:{value:t.form_info[t.map[n]],callback:function(e){t.$set(t.form_info,t.map[n],e)},expression:"form_info[map[idx]]"}}):t._e()]})),i("div",{staticClass:"value alone-right",staticStyle:{"margin-top":"30px"}},[i("div",{staticClass:"btn btn-blue",on:{click:t.save}},[t._v(t._s(t.$t("btn.save")))]),i("div",{staticClass:"btn btn-blue",on:{click:t.site_investigate}},[t._v(t._s(t.$t("btn.startScan")))])]),t.toLoadType?i("div",{staticClass:"toolbar vertical-align-flex"},[t.loadingImg?i("img",{attrs:{src:t.loading_pic,width:"30px"}}):t._e(),i("div",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.toLoadTit))])]):t._e(),i("os-table",{attrs:{info:t.origin.info1}},t._l(t.info_data,(function(e,n){return i("tr",{key:n,attrs:{slot:"table_list"},slot:"table_list"},[t._l(t.info_map,(function(n,o){return i("td",{key:o},[t._v(" "+t._s(e[n])+" ")])})),i("td",{key:3},[i("span",{class:"signal"+e.signal})]),i("td",{key:4},[i("span",{staticClass:"add",on:{click:function(i){return t.connect(e)}}},[t._v(t._s(t.$t("btn.selected")))])])],2)})),0),i("os-table",{attrs:{info:t.origin.info2}},t._l([t.status],(function(e,n){return i("tr",{key:n,attrs:{slot:"table_list"},slot:"table_list"},t._l(t.map_status,(function(n,o){return i("td",{key:o},[t._v(" "+t._s(e[n]?e[n]:"--")+" ")])})),0)})),0)],2)},o=[],a=(i("4160"),i("fb6a"),i("ace4"),i("d3b7"),i("ac1f"),i("1276"),i("498a"),i("5cc6"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("159b"),i("5530")),s={data:function(){return{pdType:!1,toLoadType:!1,loadingImg:!0,time:"",toLoadTit:this.$t("network.wan.pppoe_notice").connecting,loading_pic:i("da5b"),notice:this.$t("network.wan.pppoe_notice"),origin:this.$t("wifi.scan"),info_data:"",info_map:["ssid","bssid","enc"],form_info:{enabled:"1",ssid:"",bssid:"",encryption:"",key:"",channel:""},map:["enabled","ssid","bssid","encryption","key","channel"],status:"",map_status:["ssid","bssid","apclient_ip","apclient_rx","apclient_tx","apclient_uptime"]}},methods:{inputValue:function(t){t=t.trim(),"none"!=t.toLowerCase()&&"none"!=t?this.pdType=!1:(this.pdType=!0,this.form_info.key="")},save:function(){var t=this,e=this.deepClone(this.form_info);if("1"==this.form_info.enabled){for(var i in this.form_info)if("enabled"!=i&&!this.form_info[i])break;if("none"!=e.encryption.toLowerCase()&&e.key.length<8)return void this.$confirm(this.$t("notification.pwdLengthNotice"),{type:"error"})}console.log(e);var n=this;this.proxy_req("post","/webapi?op=set_wifi_apclient",e,(function(e){function i(){parseInt(n.status.stime);n.loadingImg=!1,n.status&&""!=n.status.apclient_ip?n.toLoadTit=n.$t("network.wan.pppoe_notice").success:n.toLoadTit=n.$t("network.wan.pppoe_notice").fail}console.log(e),t.info_data=[],n.toLoadType=!0,n.loadingImg=!0,n.toLoadTit=n.$t("network.wan.pppoe_notice").connecting,n.time=setTimeout(i,9e4)}),!0,!0,"","",n.$t("notification.perhapsSuccess"))},get_config:function(){var t=this;this.$req("/webapi?op=get_wifi_apclient_config").then((function(e){var i=e.key;"none"!=e.encryption.toLowerCase()&&"none"!=e.encryption||(i="",t.pdType=!0),Object.assign(t.form_info,{enabled:e.enabled,ssid:e.ssid,bssid:e.bssid,encryption:e.encryption,key:i,channel:e.channel})}))},getStatus:function(){var t=this,e=this;this.$req.get("/webapi?op=get_wifi_apclient_status").then((function(i){var n=parseInt(i.apclient_uptime);""!=i.apclient_ip&&n<5&&(e.loadingImg=!1,e.toLoadTit=e.$t("network.wan.pppoe_notice").success,clearTimeout(e.time)),Object.assign(i,{apclient_uptime:t.formatDuration(i.apclient_uptime),apclient_rx:t.formatByte(i.apclient_rx),apclient_tx:t.formatByte(i.apclient_tx),stime:i.apclient_uptime}),t.status=i}))},connect:function(t){console.log(t),"none"==t.enc.toLowerCase()||"none"==t.enc?this.pdType=!0:this.pdType=!1,Object.assign(this.form_info,{ssid:t.ssid,bssid:t.bssid,encryption:t.enc,key:"",channel:t.channel}),window.scrollTo({top:0})},site_investigate:function(){var t=this,e=this.createLoading();this.$req.get("/webapi?op=site_survey",{params:{wifimode:"2"}}).then((function(i){var n;if(console.log(i),e.close(),t.toLoadType=!1,!i.split)return i.data.forEach((function(e,i){var n=e.ssid;e.signal=t.transferSignal(e.signal),"0x"===n.substr(0,2).toLowerCase()&&(e.ssid=t.hexToStr(n,"utf-8"))})),void(t.info_data=i.data);n=i.split("\n");for(var o=JSON.parse(n.slice(n.length-1)).data,s=1,c=0;s<n.length;s+=2)""!=n[s].split(" ")[1]&&(o[c]=Object(a["a"])({},o[c],{bssid:n[s].split(" ")[1]}),c++);console.log(o),o.forEach((function(t,e){var i=parseInt(t.signal);i>-25?t.signal=4:i>-50?t.signal=3:i>-75?t.signal=2:i>=-100&&(t.signal=1)})),t.info_data=o,console.log(o)}))},hexToStr:function(t,e){var i,n=t.trim(),o="0x"===n.substr(0,2).toLowerCase()?n.substr(2):n,a=o.length;if(a%2!==0)return t;for(var s=[],c=0;c<a;c+=2)i=parseInt(o.substr(c,2),16),s.push(i);var r=new Uint8Array(s),l=new TextDecoder(e).decode(r);return l}},created:function(){this.$bus.emit("changeTab",4),this.get_config(),this.getStatus(),this.timer=setInterval(this.getStatus,4e3)},beforeDestroy:function(){clearInterval(this.timer)}},c=s,r=i("2877"),l=Object(r["a"])(c,n,o,!1,null,"bd60bfce",null);e["default"]=l.exports}}]);